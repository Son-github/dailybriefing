server:
  # ECSì—ì„œ SERVER_PORT=8083 ë¡œ ì£¼ì…, ì—†ìœ¼ë©´ 8083
  port: ${SERVER_PORT:8083}
  forward-headers-strategy: native

spring:
  datasource:
    # âœ… Terraformì´ SPRING_DATASOURCE_URL ë¡œ ì£¼ì…
    # ì˜ˆ) jdbc:postgresql://${module.rds.endpoint}:5432/${module.rds.db_name}?sslmode=require
    url: ${SPRING_DATASOURCE_URL}
    # âœ… RDS ê´€ë¦¬í˜• ì‹œí¬ë¦¿ì—ì„œ ECSê°€ ì£¼ì…
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari:
      # ì´ˆê¸° ì—°ê²° ì§€ì—° ì‹œ ì‹¤íŒ¨í•˜ì§€ ì•Šë„ë¡
      initialization-fail-timeout: ${SPRING_DATASOURCE_HIKARI_INITIALIZATION_FAIL_TIMEOUT:0}

  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
    show-sql: true
    properties:
      hibernate:
        format_sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect

# ALB í—¬ìŠ¤ì²´í¬ìš© actuator
management:
  endpoints:
    web:
      exposure:
        include: "health,info"
  endpoint:
    health:
      probes:
        enabled: true

external:
  weather:
    # ê¸°ë³¸ê°’ì€ ê³µê³µë°ì´í„°í¬í„¸ ì´ˆë‹¨ê¸°ì˜ˆë³´, í•„ìš”ì‹œ ENVë¡œ ë®ì–´ì“°ê¸°
    url: ${WEATHER_API_URL:http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst}
    # ğŸ” Secrets Manager â†’ ECS secrets ë¡œ ì£¼ì…ë¨ (Plaintext ê°’ë§Œ ì €ì¥)
    service-key: ${WEATHER_API_KEY}

logging:
  level:
    org.hibernate.SQL: debug
    org.hibernate.type.descriptor.sql: trace
    org.springframework.security: info

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
